(function(){var e=function(){try{return this===window}catch(e){return!1}},t=e()?window:global;t.Lyrics=function(e){var t=function(e){var t=function(e){var t=/^\[(\d{1,2}):(\d{1,2})(\.(\d{1,2}))?\]$/g.exec(e);if(!t)return undefined;var n=Number(t[1]),r=Number(t[2]),i=Number(t[4]),s=n*60+r;return i&&(s+=i/100),s},n=e.split("\n"),r=Array(),i=0;for(var s=0;s<n.length;s++){var o=n[s].replace(/(^\s*)|(\s*$)/g,"");if(o.length>0){var u=Array(o),a=Array(),f="";while(u)u=/^(\[\d{1,2}:\d{1,2}(\.\d{1,2})?\])(.*)/g.exec(u[u.length-1]),u&&(a.push(u[1]),f=u[u.length-1]);for(var l=0;l<a.length;l++)r.push({timestamp:t(a[l]),text:f})}}if(!r.length)throw"Invalid LRC string.";return r.sort(function(e,t){return e.timestamp>t.timestamp?1:-1}),r},n=t(e);this.select=function(e){if(!n)return undefined;var t=0;if(Number(e)<n[0].timestamp)return-1;for(t=0;t<n.length-1;t++)if(n[t].timestamp<=Number(e)&&n[t+1].timestamp>Number(e))break;return t},this.toJSON=function(){return n};try{this===window}catch(r){return}var i=undefined,s=undefined;this.bind=function(e){i=e,e.innerHTML="";for(var t=0;t<n.length;t++){var r=document.createElement("p");r.setAttribute("class","lyric"),r.setAttribute("idx",t),n[t].text.length>0?r.innerHTML=n[t].text:r.innerHTML="&nbsp;",e.appendChild(r)}},this.sync=function(e){if(!i||!n)return undefined;var t=this.select(e);if(t<0||s!==undefined&&t==s)return!1;s=t;var r=i.querySelector(".lyric[selected]");return r&&r.removeAttribute("selected"),r=i.querySelector('.lyric[idx="'+t+'"]'),r&&r.setAttribute("selected","selected"),s}}})();