<!DOCTYPE html>
<html>
	<head>
		<meta charset='UTF-8'/>
		<title>Demo of lyrics.js</title>
		<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
		<script type='text/javascript' src='lyrics.js'></script>
		<style type='text/css'>
#lyrics_container p{
	margin:0 2px;
	padding:0;
}

/* 高亮的歌词以粗体显示 Highlighted lyrics will be displayed in bold font */
#lyrics_container p[selected]{
	font-weight:bold;
}
		</style>
	</head>
	<body>

		<!--使用HTML5 audio标签播放音乐 Play music using HTML5 audio element-->
		<audio id='audio_player' controls='controls' src='demo.mp3'></audio>

		<!--显示歌词用的目标容器 Target element used as lyrics container-->
		<div id='lyrics_container'></div>

	</body>
	<script type='text/javascript'>
/* 使用JQuery加载歌词 Use JQuery to load lyrics file */
$.get('demo.lrc', function(lrc_text){
	var lyrics_container = document.getElementById('lyrics_container');
	Lyrics.parse(lrc_text, function(idx, timestamp, text){
		var lyric_element = document.createElement('p');
		lyric_element.setAttribute('idx', idx);
		lyric_element.setAttribute('timestamp', timestamp);
		lyric_element.innerHTML = text;
		lyrics_container.appendChild(lyric_element);
	});
	var lyrics_all = lyrics_container.getElementsByTagName('p');
	document.getElementById('audio_player').addEventListener('timeupdate', function(){
		var lyric_selected = lyrics_container.querySelectorAll('[selected]');
		for (var i = 0; i < lyric_selected.length; i++) {
			lyric_selected[i].removeAttribute('selected');
		}
		var lyric_selected = Lyrics.select(this.currentTime, lyrics_all, function(e){
			return Number(e.getAttribute('timestamp'));
		});
		if (lyric_selected) {
			lyric_selected.setAttribute('selected', 'selected');
		}
	});
});
	</script>
</html>

